machine:
  node:
    version: 6.9.0

dependencies:
  cache_directories:
    - ./node_modules/

test:
  pre:
    - npm run heroku-postbuild
  override:
    - npm run lint
    - npm run analyze
    - npm run test:configs
    - npm run test:specs
    - npm run start:test:
        background: true
    - java -jar bin/selenium-server-standalone-3.0.1.jar:
        background: true
    - ./wait_for_server.sh
    - npm run test:circle:features
    - cat ./coverage/lcov.info | ./node_modules/.bin/codacy-coverage

experimental:
  notify:
    branches:
      only:
        - master
